const phrases = {
  male: {
    "ですます調": {
      "コリに的確": ["しっかりとした施術でコリに的確にアプローチしてもらいました。"],
      "力強い": ["力強い手技でしっかりほぐしていただきました。"],
      "動作が楽に": ["施術後は体が軽くなり、動作が楽になりました。"],
      "スッキリ": ["施術後は気分もスッキリしてリフレッシュできました。"],
      "丁寧な接客": ["終始丁寧な接客で安心して受けられました。"],
      "ワザが凄い": ["施術のワザがとても上手で驚きました。"]
    },
    "カジュアル": {
      "コリに的確": ["バッチリ効いたって感じ！"],
      "力強い": ["ぐいぐいほぐしてくれて気持ちよかった～"],
      "動作が楽に": ["なんか体が軽くなってラクになったよ！"],
      "スッキリ": ["めっちゃスッキリした！"],
      "丁寧な接客": ["対応も丁寧で、居心地よかった！"],
      "ワザが凄い": ["技がキマってた！"]
    },
    "フレンドリー": {
      "コリに的確": ["ちゃんとコリの部分に届く感じがして最高でした！"],
      "力強い": ["力強さがちょうどよくて効いた～！"],
      "動作が楽に": ["施術後は体がラクになってありがたかったです♪"],
      "スッキリ": ["気分も体もスッキリできて満足です！"],
      "丁寧な接客": ["話しやすくて、丁寧な接客が嬉しかったです！"],
      "ワザが凄い": ["ワザが凄すぎて感動しちゃいました！"]
    },
    "しっかり敬語": {
      "コリに的確": ["的確にコリへアプローチしていただき感謝しております。"],
      "力強い": ["力強い施術で深部までほぐしていただきました。"],
      "動作が楽に": ["施術後は動作が楽になり助かりました。"],
      "スッキリ": ["心身ともにスッキリとした気分を味わえました。"],
      "丁寧な接客": ["ご丁寧な接客で安心して施術を受けることができました。"],
      "ワザが凄い": ["施術の技術力に大変感銘を受けました。"]
    }
  },
  female: {
    "ですます調": {
      "コリに的確": ["的確にほぐしていただき、とても楽になりました。"],
      "力強い": ["しっかりと力強く施術してくださり満足です。"],
      "動作が楽に": ["体が軽くなって動きやすくなりました。"],
      "スッキリ": ["施術後はとてもスッキリして気持ちよかったです。"],
      "丁寧な接客": ["終始丁寧に対応していただきました。"],
      "ワザが凄い": ["技術の高さに感動しました。"]
    },
    "カジュアル": {
      "コリに的確": ["ココ効く〜って感じでした！"],
      "力強い": ["力強くてガッツリきました！"],
      "動作が楽に": ["動くのがラクになった♪"],
      "スッキリ": ["スッキリ感すごい！"],
      "丁寧な接客": ["やさしく丁寧にしてくれてよかった！"],
      "ワザが凄い": ["ワザがすごくてビックリ！"]
    },
    "フレンドリー": {
      "コリに的確": ["しっかり効いて、ほんとによかったです♪"],
      "力強い": ["力加減もちょうどよくて安心でした！"],
      "動作が楽に": ["終わったあとすぐにラクさを感じられました♪"],
      "スッキリ": ["スッキリできて明るい気分になりました！"],
      "丁寧な接客": ["丁寧に対応してくれて嬉しかったです♪"],
      "ワザが凄い": ["プロの技に感動しました！"]
    },
    "しっかり敬語": {
      "コリに的確": ["施術内容が非常に的確で安心して受けられました。"],
      "力強い": ["しっかりとした圧で丁寧に施術していただきました。"],
      "動作が楽に": ["おかげさまで動作が楽になり、大変助かりました。"],
      "スッキリ": ["施術後は気分がとてもスッキリいたしました。"],
      "丁寧な接客": ["常に丁寧な対応で、心地よく過ごすことができました。"],
      "ワザが凄い": ["施術の技術に圧倒されました。"]
    }
  },
  natural: {
    "ですます調": {
      "コリに的確": ["しっかりとコリをとらえてもらえて心地よかったです。"],
      "力強い": ["ちょうどよい力加減で安心して受けられました。"],
      "動作が楽に": ["体がスムーズに動かせるようになりました。"],
      "スッキリ": ["施術後はスッキリしてとても気持ちよかったです。"],
      "丁寧な接客": ["接客が丁寧でリラックスできました。"],
      "ワザが凄い": ["技術力が高くて信頼できます。"]
    },
    "カジュアル": {
      "コリに的確": ["ちゃんと効いてて安心した〜"],
      "力強い": ["力強くて効いた感じがあった！"],
      "動作が楽に": ["体が軽くなった感じ！"],
      "スッキリ": ["終わった後スッキリ！"] ,
      "丁寧な接客": ["ていねいに話しかけてくれて嬉しかった〜"],
      "ワザが凄い": ["技が本格的だった！"]
    },
    "フレンドリー": {
      "コリに的確": ["ピンポイントで届いて気持ちよかったです！"],
      "力強い": ["ちょうどよい圧で安心できました！"],
      "動作が楽に": ["終わったあと、体がすっきり軽くなってビックリ！"],
      "スッキリ": ["頭の中までスッキリした気分になりました♪"],
      "丁寧な接客": ["ていねいに説明してくれて嬉しかったです！"],
      "ワザが凄い": ["すごく上手な技で感動しました！"]
    },
    "しっかり敬語": {
      "コリに的確": ["施術が非常に的確で心から安心できました。"],
      "力強い": ["圧の加減も適切で、しっかりとほぐしていただけました。"],
      "動作が楽に": ["施術後、自然と体が軽くなり助かりました。"],
      "スッキリ": ["心身ともにスッキリし、感謝しております。"],
      "丁寧な接客": ["常にご丁寧な対応で、安心して過ごせました。"],
      "ワザが凄い": ["技術の高さに感動し、大変満足いたしました。"]
    }
  }
};

function buildReview(gender, tone, selected, therapist) {
  const intro = therapist !== "不明"
    ? `${therapist}さんに施術してもらって、`
    : "施術を受けて、";

  const sentences = selected.map(word => {
    const options = phrases[gender]?.[tone]?.[word];
    if (options && options.length > 0) {
      const randomIndex = Math.floor(Math.random() * options.length);
      return options[randomIndex];
    }
    return word;
  });

  return intro + sentences.join(" ") + " ありがとうございました。";
}
